<ion-content [fullscreen]="true">
  <div class="ion-padding" style="height: 100%; display: flex; flex-direction: column; justify-content: center; max-width: 500px; margin: 0 auto;">
    <ion-card>
      <ion-card-content>
        <!-- Logo y título -->
        <div class="ion-text-center ion-margin-bottom">
          <ion-icon name="musical-notes" size="large" color="primary"></ion-icon>
          <h1>Metrónomo Sincronizado</h1>
          <p>Sincroniza el tempo de tu banda</p>
        </div>

        <!-- Error message -->
        @if (errorMessage()) {
          <ion-item color="danger" lines="none" class="ion-margin-bottom">
            <ion-label class="ion-text-wrap">
              {{ errorMessage() }}
            </ion-label>
          </ion-item>
        }

        <!-- Formulario -->
        <form (ngSubmit)="onLogin()">
          <!-- Nombre -->
          <ion-item>
            <ion-label position="floating">Tu Nombre</ion-label>
            <ion-input
              type="text"
              [(ngModel)]="name"
              name="name"
              [disabled]="isLoading()"
              required>
            </ion-input>
          </ion-item>

          <!-- Rol -->
          <div class="ion-margin-top">
            <ion-label>Selecciona tu rol</ion-label>
            <ion-radio-group [value]="selectedRole()" (ionChange)="selectRole($event.detail.value)">
              <ion-item>
                <ion-icon name="person" slot="start" color="primary"></ion-icon>
                <ion-label>
                  <h2>Maestro</h2>
                  <p>Controlar el metrónomo</p>
                </ion-label>
                <ion-radio slot="end" [value]="UserRole.MASTER"></ion-radio>
              </ion-item>

              <ion-item>
                <ion-icon name="people" slot="start" color="primary"></ion-icon>
                <ion-label>
                  <h2>Seguidor</h2>
                  <p>Escuchar el metrónomo</p>
                </ion-label>
                <ion-radio slot="end" [value]="UserRole.FOLLOWER"></ion-radio>
              </ion-item>

              <ion-item>
                <ion-icon name="settings" slot="start" color="primary"></ion-icon>
                <ion-label>
                  <h2>Admin</h2>
                  <p>Gestionar presets</p>
                </ion-label>
                <ion-radio slot="end" [value]="UserRole.ADMIN"></ion-radio>
              </ion-item>
            </ion-radio-group>
          </div>

          <!-- Botón de submit -->
          <ion-button
            expand="block"
            type="submit"
            [disabled]="isLoading()"
            class="ion-margin-top">
            @if (isLoading()) {
              <ion-spinner name="crescent"></ion-spinner>
              <span class="ion-margin-start">Conectando...</span>
            } @else {
              Conectar
            }
          </ion-button>
        </form>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
